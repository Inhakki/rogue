define(["require","./element-utils"],function(e){"use strict";var t=e("./element-utils"),n=function(e){this.initialize(e)};return n.prototype={initialize:function(e){this.options=t.extend({el:null,showEvent:null,hideEvent:null,onShow:null,onHide:null,cssPrefix:"ui-tooltip"},e),this.prefix=this.options.cssPrefix,this.activeClass=this.prefix+"-active",this.el=this.options.el,this.trigger=t.getElementsByClassName(this.prefix+"-trigger",this.el)[0],this.panel=t.getElementsByClassName(this.prefix+"-panel",this.el)[0],this.setup()},setup:function(){var e=this.options;e.showEvent&&(this.eventMap=this._setupEvents(e.showEvent,e.hideEvent))},_setupEvents:function(e,n){var r=this._buildEventMap(e,n),i,s;for(i in r)r.hasOwnProperty(i)&&(s=r[i],t.addEventListener(this.trigger,s.name,s.event));return r},_onDuplicateEvent:function(){this.isActive()?this.hide():this.show()},_buildEventMap:function(e,t){var n={};return e===t?(n.showEvent={name:e,event:this._onDuplicateEvent.bind(this)},n):(e&&(n.showEvent={name:e,event:this.show.bind(this)}),t&&(n.hideEvent={name:t,event:this.hide.bind(this)}),n)},show:function(){t.addClass(this.el,this.activeClass),this.options.onShow&&this.options.onShow()},hide:function(){t.removeClass(this.el,this.activeClass),this.options.onHide&&this.options.onHide()},isActive:function(){return t.hasClass(this.el,this.activeClass)},destroy:function(){var e=this.eventMap,n,r;if(e)for(n in e)e.hasOwnProperty(n)&&(r=e[n],t.removeEventListener(this.trigger,r.name,r.event))}},n});