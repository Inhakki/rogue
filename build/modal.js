define(["require","element-utils"],function(e){"use strict";var t=e("element-utils"),n=function(e){this.initialize(e)};return n.prototype={initialize:function(e){this.options=t.extend({containerEl:document.getElementsByTagName("body")[0],el:null,onHide:null,onShow:null,onClickOutside:this.hide.bind(this),activeClass:"modal-active",containerActiveClass:"modal-container-active"},e),this.container=this.options.containerEl,this.content=this.options.el},setup:function(){this.container.contains(this.content)||this.container.appendChild(this.content)},show:function(){this.setup(),t.addClass(this.content,this.options.activeClass),t.addEventListener(document,"click",this._onDocClick.bind(this),!0),t.addClass(this.container,this.options.containerActiveClass),this.options.onShow&&this.options.onShow()},hide:function(){t.removeClass(this.content,this.options.activeClass),t.removeEventListener(document,"click",this._onDocClick.bind(this),!0),this.container.getElementsByClassName(this.options.activeClass).length||t.removeClass(this.container,this.options.containerActiveClass),this.options.onHide&&this.options.onHide()},isActive:function(){return t.hasClass(this.content,this.options.activeClass)},_onDocClick:function(e){var t=e.target,n=!this.content.contains(t);n&&this.isActive()&&this.options.onClickOutside&&this.options.onClickOutside()},destroy:function(){t.removeClass(this.content,this.options.activeClass),this.container.contains(this.content)&&this.container.removeChild(this.content),this.container.getElementsByClassName(this.options.activeClass).length||t.removeClass(this.container,this.options.containerActiveClass),t.removeEventListener(document,"click",this._onDocClick.bind(this),!0)}},n});