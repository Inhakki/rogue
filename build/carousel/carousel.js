define(["underscore","element-kit"],function(e){"use strict";var t=function(e){this.initialize(e)};return t.prototype={initialize:function(t){this.options=e.extend({panels:[],assetClass:null,assetLoadingClass:"carousel-asset-loading",autoLoadAssets:!0,panelActiveClass:"carousel-panel-active",onPanelChange:null,lazyLoadAttr:"data-src"},t),this._checkForInitErrors(),this.goToPanel(0)},_checkForInitErrors:function(){this.options.panels.length||console.error("carousel init error: no panels were passed in constructor")},goToPanel:function(e){var t=this.options.panels,n=t.length-1,r=0,i=this.getCurrentIndex();e>n?e=r:e<r&&(e=n),i!==e&&(i!==undefined&&t[i].kit.classList.remove(this.options.panelActiveClass),this._currentIndex=e,t[e].kit.classList.add(this.options.panelActiveClass),this.options.autoLoadAssets&&this.loadPanelAssets(e),this.options.onPanelChange&&i!==undefined&&this.options.onPanelChange(e))},getCurrentIndex:function(){return this._currentIndex},loadPanelAssets:function(e){var t=this.options.panels[e],n=this.options.assetClass?t.getElementsByClassName(this.options.assetClass):[t],r,i=n.length,s;for(r=0;r<i;r++)s=n[r],s.getAttribute(this.options.lazyLoadAttr)&&(s.tagName.toLowerCase()==="img"?this._loadImageAsset(s):console.warn("carousel error: no matching img elements to lazy load. try supplying a valid assetClass option to constructor"))},_loadImageAsset:function(e,t){var n=new Image,r=e.getAttribute(this.options.lazyLoadAttr),i=this.options.assetLoadingClass;e.kit.classList.add(i),n.onload=function(){e.src=r,e.kit.classList.remove(i),t?t():null},n.src=r},destroy:function(){this.options.panels[this.getCurrentIndex()].kit.classList.remove(this.options.panelActiveClass),this._currentIndex=null}},t});